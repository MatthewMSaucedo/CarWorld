<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1340" height="618"><desc>title%20Handle%20Transaction%20(tx)%0A%0A%23%20Participants%0Aparticipant%20carworld.love%0Aparticipant%20StripeAPI%0Aparticipant%20EmailS3Cache%0Aparticipant%20CommerceLambda%0Aparticipant%20TxDynamo%0Aparticipant%20SES%0Aparticipant%20Admin%0Aparticipant%20Customer%0A%0A%23%20cw.love%20sends%20Customer%20email%20(custEmail)%20and%20Transaction%20ID%20(txId)%20to%20Commerce%20Lambda%0Acarworld.love-%3ECommerceLambda%3A%20custEmail%2C%20txId%0A%0A%23%20cw.love%20stores%20the%20Customer%20email%20in%20S3%20cache%20by%20key%20of%20Transaction%20ID%0ACommerceLambda-%3EEmailS3Cache%3A%20key(txId)%2C%20value(custEmail)%0A%0A%23%20cw.love%20sends%20Transaction%20details%20(txDtls)%20to%20Stripe%20API%0Acarworld.love-%3EStripeAPI%3A%20txDtls%2C%20clientSecret%0A%0A%23%20Stripe%20API%20sends%20Transaction%20details%20(txDtls)%20to%20Commerce%20Lambda%0AStripeAPI-%3ECommerceLambda%3A%20txDtls%0A%0A%23%20Commerce%20Lambda%20retrieves%20Customer%20email%20from%20S3%20cache%0ACommerceLambda%3C-EmailS3Cache%3A%20key(txDtls%5B%3AtxId%5D)%2C%20value(custEmail)%0A%0A%23%20Commerce%20Lambda%20stores%20Transaction%20details%20(txDtls)%20and%20Customer%20email%20in%20Dynamo%0ACommerceLambda-%3ETxDynamo%3A%20Record(txDtls%2BcustEmail)%0A%0A%23%20Commerce%20Lambda%20sends%20Transaction%20details%20(txDtls)%20and%20Customer%20email%20to%20SES%0ACommerceLambda-%3ESES%3A%20txDtls%2C%20custEmail%0A%0A%23%20Commerce%20Lambda%20sends%20email%20with%20Transaction%20details%20(txDtls)%20and%20Customer%20email%20(custEmail)%20to%20Admin%0ASES-%3EAdmin%3A%20email(txDtls%2C%20custEmail)%0A%0A%23%20Commerce%20Lambda%20sends%20Transaction%20details%20(txDtls)%20to%20SES%20Customer%0ACommerceLambda-%3ESES%3A%20txDtls%0A%0A%23%20Commerce%20Lambda%20sends%20email%20with%20Transaction%20details%20(txDtls)%20to%20Customer%0ASES-%3ECustomer%3A%20email(txDtls)%0A</desc><defs/><g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g><rect fill="white" stroke="none" x="0" y="0" width="1340" height="618"/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="16.5pt" font-style="normal" font-weight="normal" text-decoration="normal" x="551.6562696409982" y="24.50280495" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Handle Transaction (tx)</text></g><g/><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 72.32129753567578 95.887643371 L 72.32129753567578 618.614148971" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 243.76183692242705 95.887643371 L 243.76183692242705 618.614148971" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 375.60443084936946 95.887643371 L 375.60443084936946 618.614148971" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 651.7649790862184 95.887643371 L 651.7649790862184 618.614148971" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 867.005513895333 95.887643371 L 867.005513895333 618.614148971" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 967.8881087378028 95.887643371 L 967.8881087378028 618.614148971" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1172.1286435469174 95.887643371 L 1172.1286435469174 618.614148971" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1280.3112376264476 95.887643371 L 1280.3112376264476 618.614148971" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/></g><g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 8.167601649999995 51.782594461 L 136.47499342135157 51.782594461 L 136.47499342135157 95.887643371 L 8.167601649999995 95.887643371 L 8.167601649999995 51.782594461 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="25.8912972305" y="79.55244007099999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">carworld.love</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 194.0981408078694 51.782594461 L 293.4255330369847 51.782594461 L 293.4255330369847 95.887643371 L 194.0981408078694 95.887643371 L 194.0981408078694 51.782594461 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="211.82183638836943" y="79.55244007099999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">StripeAPI</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 309.7607363369847 51.782594461 L 441.44812536175425 51.782594461 L 441.44812536175425 95.887643371 L 309.7607363369847 95.887643371 L 309.7607363369847 51.782594461 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="327.4844319174847" y="79.55244007099999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">EmailS3Cache</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 568.4812859471247 51.782594461 L 735.0486722253122 51.782594461 L 735.0486722253122 95.887643371 L 568.4812859471247 95.887643371 L 568.4812859471247 51.782594461 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="586.2049815276247" y="79.55244007099999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">CommerceLambda</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 812.3518180096572 51.782594461 L 921.6592097810088 51.782594461 L 921.6592097810088 95.887643371 L 812.3518180096572 95.887643371 L 812.3518180096572 51.782594461 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="830.0755135901572" y="79.55244007099999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">TxDynamo</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 937.9944130810088 51.782594461 L 997.7818043945967 51.782594461 L 997.7818043945967 95.887643371 L 937.9944130810088 95.887643371 L 937.9944130810088 51.782594461 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="955.7181086615088" y="79.55244007099999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">SES</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1131.874947279772 51.782594461 L 1212.382339814063 51.782594461 L 1212.382339814063 95.887643371 L 1131.874947279772 95.887643371 L 1131.874947279772 51.782594461 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1149.5986428602719" y="79.55244007099999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Admin</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1228.717543114063 51.782594461 L 1331.9049321388325 51.782594461 L 1331.9049321388325 95.887643371 L 1228.717543114063 95.887643371 L 1228.717543114063 51.782594461 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1246.4412386945628" y="79.55244007099999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Customer</text></g></g><g><g><g><rect fill="white" stroke="none" x="309.0428585788866" y="128.558049971" width="106.0005594641211" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="311.4931390738866" y="143.259732941" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">custEmail, txId</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 72.32129753567578 149.793814261 L 638.3156617025518 149.793814261" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(651.7649790862184,149.793814261) translate(-651.7649790862184,-149.793814261)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 638.1523096695518 142.98747955266666 L 651.7649790862184 149.793814261 L 638.1523096695518 156.60014896933333 Z"/></g></g><g><g><rect fill="white" stroke="none" x="421.7244223365635" y="174.296619211" width="183.92056526246094" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="424.17470283156354" y="188.99830218099999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">key(txId), value(custEmail)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 651.7649790862184 195.532383501 L 389.0537482330361 195.532383501" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(375.60443084936946,195.532383501) translate(-375.60443084936946,-195.532383501)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 389.21710026603614 188.72604879266666 L 375.60443084936946 195.532383501 L 389.21710026603614 202.33871820933334 Z"/></g></g><g><g><rect fill="white" stroke="none" x="91.65128810734241" y="220.035188451" width="132.78055824341797" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="94.10156860234241" y="234.736871421" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">txDtls, clientSecret</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 72.32129753567578 241.270952741 L 230.3125195387604 241.270952741" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(243.76183692242705,241.270952741) translate(-243.76183692242705,-241.270952741)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 230.14916750576037 234.46461803266666 L 243.76183692242705 241.270952741 L 230.14916750576037 248.07728744933334 Z"/></g></g><g><g><rect fill="white" stroke="none" x="425.3331279670864" y="265.77375769099996" width="44.86056007447266" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="427.7834084620864" y="280.47544066099994" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">txDtls</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 243.76183692242705 287.009521981 L 638.3156617025518 287.009521981" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(651.7649790862184,287.009521981) translate(-651.7649790862184,-287.009521981)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 638.1523096695518 280.20318727266664 L 651.7649790862184 287.009521981 L 638.1523096695518 293.8158566893333 Z"/></g></g><g><g><rect fill="white" stroke="none" x="394.9344214210362" y="311.51232693099996" width="237.50056709351563" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="397.3847019160362" y="326.21400990099994" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">key(txDtls[:txId]), value(custEmail)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 375.60443084936946 332.748091221 L 638.3156617025518 332.748091221" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(651.7649790862184,332.748091221) translate(-651.7649790862184,-332.748091221)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 638.1523096695518 325.94175651266664 L 651.7649790862184 332.748091221 L 638.1523096695518 339.5544259293333 Z"/></g></g><g><g><rect fill="white" stroke="none" x="671.094969657885" y="357.25089617099997" width="176.58055366578125" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="673.545250152885" y="371.95257914099994" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Record(txDtls+custEmail)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 651.7649790862184 378.486660461 L 853.5561965116664 378.486660461" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(867.005513895333,378.486660461) translate(-867.005513895333,-378.486660461)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 853.3928444786663 371.68032575266665 L 867.005513895333 378.486660461 L 853.3928444786663 385.2929951693333 Z"/></g></g><g><g><rect fill="white" stroke="none" x="750.3962638747743" y="402.98946541099997" width="118.86056007447266" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="752.8465443697743" y="417.69114838099995" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">txDtls, custEmail</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 651.7649790862184 424.225229701 L 954.4387913541361 424.225229701" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(967.8881087378028,424.225229701) translate(-967.8881087378028,-424.225229701)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 954.2754393211361 417.41889499266665 L 967.8881087378028 424.225229701 L 954.2754393211361 431.0315644093333 Z"/></g></g><g><g><rect fill="white" stroke="none" x="987.2180993094694" y="448.728034651" width="165.58055366578125" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="989.6683798044694" y="463.42971762099995" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">email(txDtls, custEmail)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 967.8881087378028 469.963798941 L 1158.6793261632506 469.963798941" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(1172.1286435469174,469.963798941) translate(-1172.1286435469174,-469.963798941)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1158.5159741302507 463.15746423266665 L 1172.1286435469174 469.963798941 L 1158.5159741302507 476.77013364933333 Z"/></g></g><g><g><rect fill="white" stroke="none" x="787.3962638747743" y="494.466603891" width="44.86056007447266" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="789.8465443697743" y="509.16828686099996" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">txDtls</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 651.7649790862184 515.702368181 L 954.4387913541361 515.702368181" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(967.8881087378028,515.702368181) translate(-967.8881087378028,-515.702368181)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 954.2754393211361 508.89603347266666 L 967.8881087378028 515.702368181 L 954.2754393211361 522.5087028893333 Z"/></g></g><g><g><rect fill="white" stroke="none" x="1078.3093925345372" y="540.2051731309999" width="91.58056129517578" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1080.7596730295372" y="554.9068561009999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">email(txDtls)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 967.8881087378028 561.440937421 L 1266.8619202427808 561.440937421" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(1280.3112376264476,561.440937421) translate(-1280.3112376264476,-561.440937421)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1266.698568209781 554.6346027126666 L 1280.3112376264476 561.440937421 L 1266.698568209781 568.2472721293333 Z"/></g></g></g><g/><g/><g/><g/><g/><g/><g/><g/></g></svg>